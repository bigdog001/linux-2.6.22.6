static struct file_system_to_install fs_to_install[] = {
	{&yaffs_fs_type, 0},
	{&yaffs2_fs_type, 0},
	{NULL, 0}
};
file_system_type yaffs2_fs_type = {
	.owner = THIS_MODULE,
	.name = "yaffs2",
	.get_sb = yaffs2_read_super,
	.kill_sb = kill_block_super,
	.fs_flags = FS_REQUIRES_DEV,
};

int get_sb_bdev(struct file_system_type *fs_type,
	int flags, const char *dev_name, void *data,
	int (*fill_super)(struct super_block *, void *, int),
	struct vfsmount *mnt) {
	
	fill_super(...);							//调用 yaffs_internal_read_super
}


module_init(init_yaffs_fs)
init_yaffs_fs
	fsinst = fs_to_install;
	
	yaffs2_read_super							//	.get_sb = yaffs2_read_super
		get_sb_bdev
		yaffs2_internal_read_super_mtd	
			yaffs_internal_read_super
				yaffs: dev is 32505859 name is "mtdblock3"